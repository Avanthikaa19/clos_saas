<div class="formula-editor-container" cdkDrag cdkDragRootElement=".cdk-overlay-pane">
    <div class="formula-title noselect" cdkDragHandle matTooltip="Hold and drag to move.">
        <span class="formula-type">{{formulaType}}</span>
        <span>Formula</span>
    </div>
    <div class="formula-spec-container">
        <mat-tab-group [(selectedIndex)]="selectedTabIndex" (selectedTabChange)="onTabChanged($event)">
            <mat-tab>
                <ng-template mat-tab-label style="padding: 0; margin: 0;">
                    <div class="tab-label-container noselect">
                        <mat-icon>edit</mat-icon><span style="margin-left: 10px;">Edit Formula</span>
                    </div>
                </ng-template>
                <div class="my-code-editor-description noselect">
               <span>Use the editor below to set the formula. You can also use the <a class="highlight1">$[</a><a class="highlight2">field_name</a><a class="highlight1">]</a> notation for embedding other fields.
               <span *ngIf="formulaType=='Source Sql'"> SQL keywords should be in uppercase.</span> </span>
              
              </div>
                <div class="my-code-editor-wrapper" [@fadeInOut] *ngIf="selectedTabIndex==0">
                    <ngx-monaco-editor cdkFocusInitial class="my-code-editor" [options]="editorOptions" [(ngModel)]="formulaValue"
                        ></ngx-monaco-editor>
                </div>
           
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label style="padding: 0; margin: 0;">
                    <div class="tab-label-container noselect">
                        <mat-icon>compare</mat-icon><span style="margin-left: 10px;">View Differences</span>
                    </div>
                </ng-template>
                <div class="my-code-editor-description noselect">
                    <span>Use the screen below to view the differences of the original formula <a class="highlight1">(left side)</a> to the edited formula <a class="highlight1">(right side)</a>.</span>
                </div>
                <div class="my-code-diffeditor-wrapper" [@fadeInOut] *ngIf="selectedTabIndex==1">
                    <ngx-monaco-diff-editor class="my-code-diffeditor" [options]="diffOptions" [originalModel]="originalModel" [modifiedModel]="modifiedModel"></ngx-monaco-diff-editor>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
    <div class="formula-details-action">
        <button mat-stroked-button color="warn" class="item-left" (click)="onClose()">
            <mat-icon>close</mat-icon>
            <span style="padding-left: 10px;">Discard</span>
        </button>
        <button mat-raised-button color="primary" class="item-right"
            (click)="apply()">
            <mat-icon>save</mat-icon>
            <span style="padding-left: 10px;">Apply & Close</span>
        </button>
    </div>
</div>